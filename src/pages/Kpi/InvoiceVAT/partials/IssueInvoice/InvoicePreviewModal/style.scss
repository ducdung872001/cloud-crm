.invoice-modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.55);
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  animation: overlayIn 0.18s ease;
}

@keyframes overlayIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

.invoice-modal {
  background: #f5f5f0;
  border-radius: 10px;
  width: 100%;
  max-width: 860px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 24px 64px rgba(0,0,0,0.28);
  animation: modalIn 0.2s ease;
  overflow: hidden;

  @keyframes modalIn {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  // ---- Modal header ----
  &__header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    background: #fff;
    border-bottom: 1px solid #e5e7eb;
    flex-shrink: 0;

    h2 {
      font-size: 15px;
      font-weight: 600;
      color: #111827;
      margin: 0;
    }
  }

  &__header-actions {
    display: flex;
    align-items: center;
    gap: 8px;

    .btn-print,
    .btn-pdf {
      display: flex;
      align-items: center;
      gap: 5px;
      padding: 6px 12px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      background: #fff;
      font-size: 12px;
      font-weight: 500;
      color: #374151;
      cursor: pointer;
      svg { width: 13px; height: 13px; }
      &:hover { background: #f9fafb; }
    }

    .btn-close-modal {
      width: 30px;
      height: 30px;
      border: none;
      background: #f3f4f6;
      border-radius: 6px;
      font-size: 14px;
      color: #6b7280;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      &:hover { background: #e5e7eb; color: #111827; }
    }
  }

  // ---- Scrollable body ----
  &__body-scroll {
    overflow-y: auto;
    flex: 1;
    padding: 20px;
  }

  // ---- Footer ----
  &__footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 10px;
    padding: 14px 20px;
    background: #fff;
    border-top: 1px solid #e5e7eb;
    flex-shrink: 0;

    .btn-back {
      padding: 9px 18px;
      border: 1px solid #d1d5db;
      border-radius: 6px;
      background: #fff;
      font-size: 13px;
      color: #374151;
      cursor: pointer;
      &:hover { background: #f9fafb; }
    }

    .btn-sign-publish {
      display: flex;
      align-items: center;
      gap: 7px;
      padding: 9px 20px;
      background: #d97706;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      svg { width: 14px; height: 14px; }
      &:hover { background: #b45309; }
    }
  }
}

// ---- Invoice paper ----
.invoice-paper {
  margin: 20px;
  background: #fff;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 12px rgba(0,0,0,0.08);
  overflow-y: auto;
  max-height: calc(90vh - 140px);

  // Top dark header
  .paper__top {
    background: #1e3a5f;
    padding: 20px 24px;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    color: #fff;
  }

  .paper__seller {
    &-name {
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 6px;
    }
    &-meta {
      font-size: 11.5px;
      color: #cbd5e1;
      line-height: 1.6;
    }
  }

  .paper__invoice-info {
    text-align: right;
  }

  .paper__title {
    font-size: 18px;
    font-weight: 800;
    color: #f59e0b;
    letter-spacing: 0.04em;
    margin-bottom: 8px;
  }

  .paper__meta {
    font-size: 11.5px;
    color: #cbd5e1;
    line-height: 1.8;
    strong { color: #fff; }
  }

  // Parties section
  .paper__parties {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0;
    border-bottom: 1px solid #e5e7eb;
    padding: 18px 24px;
    gap: 32px;
  }

  .paper__party {
    &-label {
      font-size: 10px;
      font-weight: 700;
      color: #9ca3af;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      margin-bottom: 6px;
    }
    &-name {
      font-size: 14px;
      font-weight: 700;
      color: #111827;
      margin-bottom: 4px;
    }
    &-line {
      font-size: 12px;
      color: #4b5563;
      line-height: 1.7;
    }
    &-taxbadge {
      display: inline-block;
      margin-top: 8px;
      padding: 3px 10px;
      background: #fef3c7;
      border: 1px solid #fcd34d;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      color: #92400e;
    }
  }

  // Items table
  .paper__table {
    width: 100%;
    border-collapse: collapse;
    margin: 0;

    thead tr {
      background: #f3f4f0;
    }

    th {
      padding: 9px 12px;
      font-size: 10.5px;
      font-weight: 700;
      color: #6b7280;
      text-align: left;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      border-bottom: 1px solid #e5e7eb;
      border-top: 1px solid #e5e7eb;

      &.col-tt  { width: 40px; text-align: center; }
      &.col-dvt { width: 60px; text-align: center; }
      &.col-sl  { width: 50px; text-align: center; }
      &.col-dg  { width: 120px; text-align: right; }
      &.col-thue{ width: 70px; text-align: center; }
      &.col-tt2 { width: 120px; text-align: right; }
    }

    td {
      padding: 10px 12px;
      font-size: 13px;
      color: #111827;
      border-bottom: 1px solid #f3f4f6;
      vertical-align: top;

      &.text-center { text-align: center; }
      &.text-right  { text-align: right; }
    }

    .item-name {
      font-size: 13px;
      font-weight: 500;
      color: #111827;
    }
    .item-sub {
      font-size: 11px;
      color: #9ca3af;
      margin-top: 2px;
    }
  }

  // Bottom: note + totals
  .paper__bottom {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    padding: 16px 24px;
    border-top: 1px solid #e5e7eb;
    gap: 20px;
  }

  .paper__note {
    flex: 1;
    &-label { font-size: 12px; font-weight: 600; color: #374151; margin-bottom: 4px; }
    &-text  { font-size: 12px; color: #4b5563; line-height: 1.6; }
    &-words { font-size: 11.5px; color: #6b7280; font-style: italic; margin-top: 6px; }
  }

  .paper__totals {
    min-width: 240px;
  }

  .paper__total-row {
    display: flex;
    justify-content: space-between;
    font-size: 12.5px;
    color: #4b5563;
    padding: 4px 0;
    &.vat span:last-child { color: #d97706; font-weight: 600; }
  }

  .paper__total-grand {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: #1e3a5f;
    border-radius: 6px;
    padding: 9px 14px;
    margin-top: 8px;
    span:first-child { font-size: 12px; font-weight: 600; color: #93c5fd; }
    span:last-child  { font-size: 16px; font-weight: 800; color: #f59e0b; }
  }

  // Signatures
  .paper__signatures {
    display: flex;
    justify-content: space-between;
    padding: 16px 24px 20px;
    border-top: 1px solid #f3f4f6;
  }

  .paper__sig {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 4px;
    min-width: 160px;

    &--right { align-items: flex-end; }

    &-title { font-size: 13px; font-weight: 600; color: #111827; }
    &-sub   { font-size: 11px; color: #9ca3af; font-style: italic; }
    &-line  {
      width: 120px;
      height: 1px;
      background: #d1d5db;
      margin: 16px 0 6px;
    }
    &-name  { font-size: 12px; color: #374151; }
  }

  // Stamp
  .paper__stamp {
    margin-top: 8px;
    display: flex;
    justify-content: flex-end;
  }

  .stamp-circle {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    border: 2.5px solid #d97706;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
    transform: rotate(-12deg);
    color: #d97706;

    span {
      font-size: 9px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      line-height: 1.3;
      text-align: center;
    }
  }
}